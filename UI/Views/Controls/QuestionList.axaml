<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:input="clr-namespace:FluentAvalonia.UI.Input;assembly=FluentAvalonia"
             xmlns:questions="clr-namespace:UI.ViewModels.Questions"
             xmlns:lang="clr-namespace:UI.Lang"
             xmlns:controls="clr-namespace:FluentAvalonia.UI.Controls;assembly=FluentAvalonia"
             xmlns:pages="clr-namespace:UI.ViewModels.Pages"
             x:DataType="pages:QuestionsPageViewModel"
             x:Class="UI.Views.Controls.QuestionList">
    <UserControl.Styles>
        <StyleInclude Source="/Styles/ButtonStyles.axaml"/>
    </UserControl.Styles>
    
    <ScrollViewer ClipToBounds="True"
                  Margin="10, 20, 0, 0">
        <ItemsRepeater x:Name="QuestionsList"
                       ItemsSource="{Binding QuestionsSearch}">
            <ItemsRepeater.Resources>
                <input:XamlUICommand x:Key="DeleteQuestion"
                                     Command="{Binding DeleteQuestion}"/>
                <input:XamlUICommand x:Key="EditQuestion"
                                     Command="{Binding EditQuestionBtn}"/>
            </ItemsRepeater.Resources>
            
            <ItemsRepeater.Styles>
                <Style Selector="Border:pointerover">
                    <Setter Property="Background" Value="{DynamicResource ControlAltFillColorTertiaryBrush}"/>
                    <Setter Property="BorderBrush" Value="{DynamicResource ControlElevationBorderBrush}"/>
                    <Setter Property="Cursor" Value="Hand"></Setter>
                </Style>
            </ItemsRepeater.Styles>

            <ItemsRepeater.ItemTemplate>
                <DataTemplate DataType="{x:Type questions:SingleQuestionViewModel}">
                    <Border CornerRadius="4" BorderThickness="1">
                        <Grid ColumnDefinitions="Auto,*,Auto,Auto"
                              PointerPressed="OnPointerPressed"
                              ToolTip.ShowDelay="500"
                              ToolTip.BetweenShowDelay="-1"
                              ToolTip.Tip="{Binding Path}">
                            <Svg Path="{Binding Icon}"
                                 Margin="10, 0, 0, 0"
                                 Width="30" Height="30"
                                 VerticalAlignment="Center"/>
     
                            <StackPanel Grid.Column="1"
                                        Margin="10"
                                        Background="Transparent"
                                        VerticalAlignment="Center">
                                <TextBlock Margin="0, 0, 0, 5"
                                           TextTrimming="CharacterEllipsis"
                                           Background="Transparent"
                                           Foreground="{DynamicResource AccentTextFillColorTertiaryBrush}"
                                           Text="{Binding Name, Mode=OneWay}"/>
                                <TextBlock Theme="{StaticResource CaptionTextBlockStyle}"
                                           Background="Transparent"
                                           Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                           TextWrapping="Wrap"
                                           Text="{Binding Description, Mode=OneWay}"/>
                            </StackPanel>

                            <Button Grid.Column="2"
                                    Margin="0, 0, 10, 0"
                                    Classes="transparent-button"
                                    ToolTip.Tip="{x:Static lang:Lang.ToolTipRemoveButton}"
                                    Command="{StaticResource DeleteQuestion}"
                                    CommandParameter="{Binding}">
                                <controls:SymbolIcon Symbol="Delete" FontSize="20"/>
                            </Button>
                            <Button Grid.Column="3"
                                    Margin="0, 0, 15, 0"
                                    Classes="transparent-button"
                                    ToolTip.Tip="{x:Static lang:Lang.ToolTipEditButton}"
                                    Command="{StaticResource EditQuestion}"
                                    CommandParameter="{Binding}">
                                <controls:SymbolIcon Symbol="Edit" FontSize="20"/>
                            </Button>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ItemsRepeater.ItemTemplate>
        </ItemsRepeater>
    </ScrollViewer>
</UserControl>
